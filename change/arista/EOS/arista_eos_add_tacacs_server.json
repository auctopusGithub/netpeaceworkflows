{
  "name": "arista_eos_add_tacacs_server",
  "description": [
    {
      "name": "tacacs_ip",
      "type": "String",
      "label": "TACACS Server"
    },
    {
      "name": "changeNumber",
      "type": "String",
      "label": "Change Number"
    },
    {
      "name": "key",
      "type": "String",
      "label": "Secret Key"
    },
    {
      "name": "port",
      "type": "String",
      "label": "Port"
    }
  ],
  "workflow_data": {
    "edges": [
      {
        "id": "99d6c1ba-f658-4a89-8c4a-e13df22616d7",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "ed7c970d-b5ca-46d3-815c-52a08998f434",
        "target": "e4caf1b7-67e2-430e-8eea-560a27c7bb16",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "991ca3bc-390a-426c-9cfe-efd7411708c5",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "e4caf1b7-67e2-430e-8eea-560a27c7bb16",
        "target": "41b85001-baee-4bc3-bc64-da14f8a44a1e",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "98ac2319-06ae-4c36-a541-0bf208a08d23",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "aded9d1e-e7eb-4dfb-a8ee-049c0240e699",
        "target": "c54fafd5-57a8-4361-88ec-aa4ebc70139e",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "yes",
        "targetHandle": "target"
      },
      {
        "id": "129afc72-0f88-42ee-b8ca-bcb141d31bad",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "aded9d1e-e7eb-4dfb-a8ee-049c0240e699",
        "target": "31ee425a-981d-41c9-87ca-52549fdb22c8",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "no",
        "targetHandle": "target"
      },
      {
        "id": "cc4f5c1a-c88e-45c8-a505-90764c69eb52",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "31ee425a-981d-41c9-87ca-52549fdb22c8",
        "target": "0b581b13-2a51-417d-90dc-35d96f2c7761",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "start-end"
      },
      {
        "id": "6477e1be-ef19-4248-b501-a0dfea1961b0",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "c54fafd5-57a8-4361-88ec-aa4ebc70139e",
        "target": "40fbac92-082f-4e4d-b498-21bfd9106a61",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "bea1fc9b-ad49-462f-b0e7-d41a367dbb76",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "40fbac92-082f-4e4d-b498-21bfd9106a61",
        "target": "00a51ac2-281a-4f17-92d9-824debc475bc",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "c9c8d79f-98ec-405a-ad70-c49c35290ded",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "00a51ac2-281a-4f17-92d9-824debc475bc",
        "target": "9b4b3c11-d034-4689-ac43-83fd4c519c92",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "yes",
        "targetHandle": "target"
      },
      {
        "id": "df9f97ef-294d-497e-a78d-734aeadce289",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "00a51ac2-281a-4f17-92d9-824debc475bc",
        "target": "fec25c12-2c3c-4d17-a920-8e0282c17e92",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "no",
        "targetHandle": "start-end"
      },
      {
        "id": "1e5bb06a-834a-4499-8a38-c0b891e2a168",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "9b4b3c11-d034-4689-ac43-83fd4c519c92",
        "target": "a033b6dd-4b63-444c-82db-6328fb2137d9",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "3e3e804d-6c1a-4c8e-9d7c-5d5723502174",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "a033b6dd-4b63-444c-82db-6328fb2137d9",
        "target": "1dc325ba-af88-432e-8881-bccf3f8b5992",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "no",
        "targetHandle": "target"
      },
      {
        "id": "c06e25ae-8046-409d-9e13-e77e864b2b95",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "a033b6dd-4b63-444c-82db-6328fb2137d9",
        "target": "bed3d2b5-094b-41dc-b2e0-cda46e0f2a31",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "yes",
        "targetHandle": "target"
      },
      {
        "id": "81011c76-22be-4063-9bb4-fa475ee031c2",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "bed3d2b5-094b-41dc-b2e0-cda46e0f2a31",
        "target": "612f5f0f-208e-4b08-ad27-77a61e3f75a2",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "f1bd26ea-8835-4db0-9695-06bd8339908b",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "612f5f0f-208e-4b08-ad27-77a61e3f75a2",
        "target": "f244d022-f4ac-41ea-bbe2-521d72ad8ee7",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "7dad125b-f35e-4275-8650-4e2e01a8bffc",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "f244d022-f4ac-41ea-bbe2-521d72ad8ee7",
        "target": "14c7199a-ead5-4c0d-b987-9c3d59cab774",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "start-end"
      },
      {
        "id": "ac906fa9-1092-452e-be94-48f29d7a3550",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "1dc325ba-af88-432e-8881-bccf3f8b5992",
        "target": "64c024fd-fd46-43e9-9ff3-91f24d39c025",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "366abdca-f537-494e-86ea-8a2929f0e4ab",
        "type": "smoothstep",
        "style": {
          "stroke": "grey",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "64c024fd-fd46-43e9-9ff3-91f24d39c025",
        "target": "e6895ea4-0e76-4396-bcd2-b0756856705a",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "grey",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "start-end"
      },
      {
        "id": "ddbb11fc-81a5-4804-81fb-85cc49fafc1b",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "41b85001-baee-4bc3-bc64-da14f8a44a1e",
        "target": "aded9d1e-e7eb-4dfb-a8ee-049c0240e699",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "source",
        "targetHandle": "target"
      },
      {
        "id": "f2ec78d4-3c78-4f2d-b7ee-b0929fbcde02",
        "type": "smoothstep",
        "style": {
          "stroke": "#4caf50",
          "transition": "all 0.5s ease-in-out"
        },
        "source": "start",
        "target": "ed7c970d-b5ca-46d3-815c-52a08998f434",
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#4caf50",
          "width": 20,
          "height": 20
        },
        "sourceHandle": "start-end",
        "targetHandle": "target"
      }
    ],
    "nodes": [
      {
        "id": "e4caf1b7-67e2-430e-8eea-560a27c7bb16",
        "data": {
          "type": "show-commands",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "show-commands",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 469.4539594237157,
          "y": -67.2824560082783
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "41b85001-baee-4bc3-bc64-da14f8a44a1e",
        "data": {
          "type": "job-report",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false,
          "reportData": [
            {
              "id": "4f85d359-48ff-4ef2-9ea2-a941322ad35a",
              "job_id": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "jobName": "job_9/6/2025 12:45:28 pm",
              "hostname": "arista02.in",
              "job_type": "Show Commands",
              "UserJobID": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "ip_address": "10.71.2.41",
              "date_created": "Mon 09, Jun 2025, 12:46 PM",
              "data_dump_pre": null,
              "device_status": "Reachable",
              "data_dump_post": null,
              "data_dump_config": null,
              "authentication_status": "Succesful",
              "data_dump_show_commands": [
                {
                  "error": "False",
                  "command_name": "sh run | in tacacs",
                  "command_output": "No output received",
                  "command_status": "Success"
                }
              ]
            },
            {
              "id": "9b63edad-2860-4693-9996-82541e34ba22",
              "job_id": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "jobName": "job_9/6/2025 12:45:28 pm",
              "hostname": "arista01.in",
              "job_type": "Show Commands",
              "UserJobID": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "ip_address": "10.71.2.40",
              "date_created": "Mon 09, Jun 2025, 12:46 PM",
              "data_dump_pre": null,
              "device_status": "Reachable",
              "data_dump_post": null,
              "data_dump_config": null,
              "authentication_status": "Succesful",
              "data_dump_show_commands": [
                {
                  "error": "False",
                  "command_name": "sh run | in tacacs",
                  "command_output": "No output received",
                  "command_status": "Success"
                }
              ]
            },
            {
              "id": "f3ee2959-449c-4298-afcb-93381b275def",
              "job_id": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "jobName": "job_9/6/2025 12:45:28 pm",
              "hostname": "arista05.in",
              "job_type": "Show Commands",
              "UserJobID": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "ip_address": "10.71.2.45",
              "date_created": "Mon 09, Jun 2025, 12:46 PM",
              "data_dump_pre": null,
              "device_status": "Unreachable",
              "data_dump_post": null,
              "data_dump_config": null,
              "authentication_status": "Failed",
              "data_dump_show_commands": []
            },
            {
              "id": "4ce7d9e7-3f04-4c61-bffb-b8ecaa0d0b8a",
              "job_id": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "jobName": "job_9/6/2025 12:45:28 pm",
              "hostname": "arista03.in",
              "job_type": "Show Commands",
              "UserJobID": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "ip_address": "10.71.2.43",
              "date_created": "Mon 09, Jun 2025, 12:46 PM",
              "data_dump_pre": null,
              "device_status": "Unreachable",
              "data_dump_post": null,
              "data_dump_config": null,
              "authentication_status": "Failed",
              "data_dump_show_commands": []
            },
            {
              "id": "cfce936a-4038-463c-a3c0-9be705af59ea",
              "job_id": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "jobName": "job_9/6/2025 12:45:28 pm",
              "hostname": "arista04.in",
              "job_type": "Show Commands",
              "UserJobID": "aeaed3ad-9b7c-46a9-88b6-65c94bb56518",
              "ip_address": "10.71.2.44",
              "date_created": "Mon 09, Jun 2025, 12:46 PM",
              "data_dump_pre": null,
              "device_status": "Unreachable",
              "data_dump_post": null,
              "data_dump_config": null,
              "authentication_status": "Failed",
              "data_dump_show_commands": []
            }
          ]
        },
        "type": "job-report",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 470.56522396683414,
          "y": 20.439919645951143
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "ed7c970d-b5ca-46d3-815c-52a08998f434",
        "data": {
          "type": "commands",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false,
          "show_steps": [
            "sh run | in tacacs"
          ],
          "config_steps": [
            "tacacs-server host {{tacacs_ip}} port {{port}} key {{key}}",
            "aaa authentication login default group tacacs+ local",
            "aaa authorization exec default group tacacs+ local"
          ]
        },
        "type": "commands",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 467.2133209709797,
          "y": -162.57849658456257
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "aded9d1e-e7eb-4dfb-a8ee-049c0240e699",
        "data": {
          "type": "decision",
          "error": false,
          "value": "",
          "script": "const configCommand = getVariable(\"configCommands\");\nconst showCommands = getVariable(\"showCommands\");\nconst tacacs_ip = getVariable(\"tacacs_ip\");\nconst jobReportJsonData = getVariable(\"rawShowOutput\");\n\n// Replace vars with actual values\nconst configCommandOutput = configCommand.replace(/{{(.*?)}}/g, (_, varName) => getVariable(varName));\n\nconsole.log(\"Config Command: \", configCommandOutput);\nconsole.log(\"Show Commands: \", showCommands);\nconsole.log(\"Tacacs Ip: \", tacacs_ip);\nconsole.log(\"Job Report JSON Data: \", jobReportJsonData);\n\nlet devicesToConfigure = {};\nlet allDevices = {};\nlet reportAvailable = true;\nlet resultList = {};\nlet errorList = {};\nerrorList.errors = [];\n\nif (\n  !jobReportJsonData ||\n  !jobReportJsonData ||\n  !Array.isArray(jobReportJsonData)\n) {\n  reportAvailable = false;\n  errorList.errors = [\"No report available\"];\n  console.error(\"Invalid JSON data format.\");\n} else {\n  jobReportJsonData.forEach((dataItem) => {\n    if (!dataItem) {\n      reportAvailable = false;\n      errorList.errors = [\"No data available\"];\n      return;\n    }\n\n    const deviceIP = dataItem.ip_address;\n    const reachability_status = dataItem.device_status === \"Reachable\";\n    let change_required = true;\n    let current_config = \"\";\n    let authentication = false;\n\n    if (dataItem.device_status === \"Reachable\") {\n      authentication = true;\n    }\n\n    allDevices[deviceIP] = true;\n\n    if (\n      !dataItem.data_dump_show_commands ||\n      !Array.isArray(dataItem.data_dump_show_commands) ||\n      dataItem.data_dump_show_commands.length < 1\n    ) {\n      change_required = null;\n      current_config = \"NA\";\n\n      resultList[deviceIP] = {\n        reachability_status,\n        authentication,\n        change_required,\n        current_config,\n      };\n\n      reportAvailable = false;\n      errorList.errors = [`No data available for ${deviceIP}`];\n      return;\n    }\n\n    let data_found = false;\n    let jobOutputNotAvailable = false;\n\n    dataItem.data_dump_show_commands.forEach((command) => {\n      if (\n        command &&\n        command.json_output &&\n        Array.isArray(command.json_output) &&\n        command.command_name === `${showCommands}`\n      ) {\n        const array = command.json_output;\n\n        for (let i = 0; i < array.length; i++) {\n          if (array[i].includes(tacacs_ip)) {\n            change_required = false;\n            data_found = true;\n            break;\n          }\n        }\n        current_config = command.command_output;\n      } else if (\n        command &&\n        command.error === \"False\" &&\n        command.command_status === \"Success\" &&\n        command.command_output === \"No output received\" &&\n        command.command_name === `${showCommands}`\n      ) {\n        change_required = true;\n        data_found = false;\n        current_config = command.command_output;\n      } else {\n        jobOutputNotAvailable = true;\n        change_required = null;\n        current_config = \"No output available\";\n        errorList.errors.push(`No output available for ${deviceIP}`);\n      }\n    });\n\n    resultList[deviceIP] = {\n      reachability_status,\n      authentication,\n      change_required,\n      current_config,\n    };\n\n    if (!data_found && !jobOutputNotAvailable) {\n      devicesToConfigure[deviceIP] = true;\n      resultList[deviceIP][\"config_command\"] = configCommandOutput;\n      resultList[deviceIP][\"show_command\"] = showCommands;\n    } else {\n      resultList[deviceIP][\"config_command\"] = \"NA\";\n    }\n  });\n}\n\nsetVariable(\"expectedConfigData\", resultList);\n\nconsole.log(\"Devices to configure: \", devicesToConfigure);\nconsole.log(\"All devices: \", allDevices);\nconsole.log(\"Report available: \", reportAvailable);\nconsole.log(\"Result list: \", resultList);\nconsole.log(\"Error list: \", errorList);\nconsole.log(\"Move Further: \", Object.keys(devicesToConfigure).length > 0);\n\nreturn Object.keys(devicesToConfigure).length > 0;",
          "success": false,
          "isLoading": false
        },
        "type": "decision",
        "dragging": false,
        "measured": {
          "width": 48,
          "height": 48
        },
        "position": {
          "x": 523.482044065508,
          "y": 143.23159268841616
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "c54fafd5-57a8-4361-88ec-aa4ebc70139e",
        "data": {
          "type": "ai-opinion",
          "error": false,
          "value": "",
          "success": false,
          "aiOpinion": "{\"Problem_Found\":\"The specified TACACS+ server IP and port settings could lead to authentication failures if the server is unreachable or misconfigured.\",\"Category\":\"Authentication Configuration\",\"Outage_Potentials\":{\"Data_Plane\":false,\"Control_Plane\":true},\"Possible_Solution\":\"Ensure that the TACACS+ server at 192.168.67.11 is reachable on port 5141 and that the key 'mysecretkey' is correct.\"}",
          "isLoading": false
        },
        "type": "ai-opinion",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 307.27777777777777,
          "y": 211.75077607896594
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "40fbac92-082f-4e4d-b498-21bfd9106a61",
        "data": {
          "type": "expected-config",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "expected-config",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 307.1666666666667,
          "y": 321.29301526811395
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "31ee425a-981d-41c9-87ca-52549fdb22c8",
        "data": {
          "type": "process",
          "error": false,
          "value": "",
          "script": "handleError(\"Configuration already exists.\");",
          "success": false,
          "isLoading": false
        },
        "type": "process",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 683.6666666666667,
          "y": 197.86188719007708
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "0b581b13-2a51-417d-90dc-35d96f2c7761",
        "data": {
          "type": "end",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "end",
        "dragging": false,
        "measured": {
          "width": 32,
          "height": 48
        },
        "position": {
          "x": 742.0000000000001,
          "y": 317.3063316345215
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "00a51ac2-281a-4f17-92d9-824debc475bc",
        "data": {
          "type": "boolean-box",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false,
          "variableNodeType": "expected-config"
        },
        "type": "boolean-box",
        "dragging": false,
        "measured": {
          "width": 48,
          "height": 48
        },
        "position": {
          "x": 358.33333333333337,
          "y": 467.6819041570028
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "fec25c12-2c3c-4d17-a920-8e0282c17e92",
        "data": {
          "type": "end",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "end",
        "dragging": false,
        "measured": {
          "width": 32,
          "height": 48
        },
        "position": {
          "x": 558.6666666666667,
          "y": 566.6263486014471
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "9b4b3c11-d034-4689-ac43-83fd4c519c92",
        "data": {
          "type": "multi-config",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "multi-config",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 165.61111111111114,
          "y": 569.404126379225
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "bed3d2b5-094b-41dc-b2e0-cda46e0f2a31",
        "data": {
          "type": "configuration-output",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false,
          "reportData": {
            "10.71.2.40": {
              "device_ip": "10.71.2.40",
              "job_report": [
                {
                  "id": "3da31d87-1e67-4713-896b-6b49bb52b696",
                  "job_id": "2f0a1d44-2dba-44af-84f6-9b31161f17a6",
                  "jobName": "CHG0030002_9/6/2025 12:46:40 pm_config",
                  "hostname": "arista01.in",
                  "job_type": "Configuration",
                  "UserJobID": "2f0a1d44-2dba-44af-84f6-9b31161f17a6",
                  "ip_address": "10.71.2.40",
                  "date_created": "Mon 09, Jun 2025, 12:47 PM",
                  "data_dump_pre": [
                    {
                      "error": "False",
                      "command_name": "sh run | in tacacs",
                      "command_output": "No output received",
                      "command_status": "Success"
                    }
                  ],
                  "device_status": "Reachable",
                  "command_output": "",
                  "data_dump_post": [
                    {
                      "error": "False",
                      "json_output": [
                        "tacacs-server host 192.168.67.11 port 5141 key 7 0702385F4B0A0B0003190E15\naaa authentication login default group tacacs+ local\naaa authorization exec default group tacacs+ local"
                      ],
                      "command_name": "sh run | in tacacs",
                      "command_output": "tacacs-server host 192.168.67.11 port 5141 key 7 0702385F4B0A0B0003190E15\naaa authentication login default group tacacs+ local\naaa authorization exec default group tacacs+ local",
                      "command_status": "Success"
                    }
                  ],
                  "data_dump_config": [
                    {
                      "command_name": [
                        "tacacs-server host 192.168.67.11 port 5141 key mysecretkey",
                        "aaa authentication login default group tacacs+ local",
                        "aaa authorization exec default group tacacs+ local"
                      ],
                      "command_output": "configure terminal\narista01.in(config)#tacacs-server host 192.168.67.11 port 5141 key mysecretkey\nTACACS+ host 192.168.67.11 with port 5141 created\narista01.in(config)#aaa authentication login default group tacacs+ local\narista01.in(config)#aaa authorization exec default group tacacs+ local\narista01.in(config)#end\narista01.in#",
                      "command_status": "Success"
                    }
                  ],
                  "authentication_status": "Succesful",
                  "data_dump_show_commands": null
                }
              ],
              "show_command": "sh run | in tacacs",
              "authentication": true,
              "config_command": "tacacs-server host 192.168.67.11 port 5141 key mysecretkey;aaa authentication login default group tacacs+ local;aaa authorization exec default group tacacs+ local",
              "current_config": "No output received",
              "change_required": true,
              "device_group_id": "1f7f5443-6c6d-46b9-9736-6b5b839e4ab0",
              "config_template_id": "4d3478c7-eb01-45c4-8613-4db05eaee463",
              "reachability_status": true
            },
            "10.71.2.41": {
              "device_ip": "10.71.2.41",
              "job_report": [
                {
                  "id": "b12b48f8-395a-4bcd-9194-9dd8418841d9",
                  "job_id": "042a86cb-77b7-4c0e-972c-c6ae9920ef5a",
                  "jobName": "CHG0030002_9/6/2025 12:46:41 pm_config",
                  "hostname": "arista02.in",
                  "job_type": "Configuration",
                  "UserJobID": "042a86cb-77b7-4c0e-972c-c6ae9920ef5a",
                  "ip_address": "10.71.2.41",
                  "date_created": "Mon 09, Jun 2025, 12:47 PM",
                  "data_dump_pre": [
                    {
                      "error": "False",
                      "command_name": "sh run | in tacacs",
                      "command_output": "No output received",
                      "command_status": "Success"
                    }
                  ],
                  "device_status": "Reachable",
                  "command_output": "",
                  "data_dump_post": [
                    {
                      "error": "False",
                      "json_output": [
                        "tacacs-server host 192.168.67.11 port 5141 key 7 0702385F4B0A0B0003190E15\naaa authentication login default group tacacs+ local\naaa authorization exec default group tacacs+ local"
                      ],
                      "command_name": "sh run | in tacacs",
                      "command_output": "tacacs-server host 192.168.67.11 port 5141 key 7 0702385F4B0A0B0003190E15\naaa authentication login default group tacacs+ local\naaa authorization exec default group tacacs+ local",
                      "command_status": "Success"
                    }
                  ],
                  "data_dump_config": [
                    {
                      "command_name": [
                        "tacacs-server host 192.168.67.11 port 5141 key mysecretkey",
                        "aaa authentication login default group tacacs+ local",
                        "aaa authorization exec default group tacacs+ local"
                      ],
                      "command_output": "configure terminal\narista02.in(config)#tacacs-server host 192.168.67.11 port 5141 key mysecretkey\nTACACS+ host 192.168.67.11 with port 5141 created\narista02.in(config)#aaa authentication login default group tacacs+ local\narista02.in(config)#aaa authorization exec default group tacacs+ local\narista02.in(config)#end\narista02.in#",
                      "command_status": "Success"
                    }
                  ],
                  "authentication_status": "Succesful",
                  "data_dump_show_commands": null
                }
              ],
              "show_command": "sh run | in tacacs",
              "authentication": true,
              "config_command": "tacacs-server host 192.168.67.11 port 5141 key mysecretkey;aaa authentication login default group tacacs+ local;aaa authorization exec default group tacacs+ local",
              "current_config": "No output received",
              "change_required": true,
              "device_group_id": "5b6cd109-ca83-494a-bc40-fd793b56342e",
              "config_template_id": "3e1d3433-d408-4987-9b02-8202f1546f0e",
              "reachability_status": true
            }
          }
        },
        "type": "configuration-output",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": -9.388888888888872,
          "y": 801.3485708236693
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "612f5f0f-208e-4b08-ad27-77a61e3f75a2",
        "data": {
          "type": "mail",
          "error": false,
          "value": "",
          "message": "{{ plainTextOutput }}",
          "payload": {
            "message": "{{ plainTextOutput }}",
            "subject": "Cisco IOS add TACACS Server Workflow Report",
            "email_group": "9f033c55-dc8d-47cd-8f7e-c280f41b6df7"
          },
          "subject": "Cisco IOS add TACACS Server Workflow Report",
          "success": false,
          "isLoading": false,
          "email_group": {
            "id": "9f033c55-dc8d-47cd-8f7e-c280f41b6df7",
            "group_name": "Default",
            "is_deleted": false
          }
        },
        "type": "mail",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": -8.944444444444429,
          "y": 917.4041263792251
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "f244d022-f4ac-41ea-bbe2-521d72ad8ee7",
        "data": {
          "type": "itsm-worknotes",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false,
          "event_type": "Change",
          "work_notes": "{{itsmWorknotesOutput}}"
        },
        "type": "itsm-worknotes",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": -8.833333333333314,
          "y": 1035.681904157003
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "14c7199a-ead5-4c0d-b987-9c3d59cab774",
        "data": {
          "type": "end",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "end",
        "dragging": false,
        "measured": {
          "width": 32,
          "height": 48
        },
        "position": {
          "x": 50.44444444444446,
          "y": 1146.6819041570027
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "1dc325ba-af88-432e-8881-bccf3f8b5992",
        "data": {
          "type": "mail",
          "error": false,
          "value": "",
          "message": "{{ plainTextOutput }}",
          "payload": {
            "message": "{{ plainTextOutput }}",
            "subject": "Cisco IOS add TACACS Server Workflow Report",
            "email_group": "9f033c55-dc8d-47cd-8f7e-c280f41b6df7"
          },
          "subject": "Cisco IOS add TACACS Server Workflow Report",
          "success": false,
          "isLoading": false,
          "email_group": {
            "id": "9f033c55-dc8d-47cd-8f7e-c280f41b6df7",
            "group_name": "Default",
            "is_deleted": false
          }
        },
        "type": "mail",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 355.88888888888886,
          "y": 794.4041263792249
        },
        "selected": true,
        "resizable": false
      },
      {
        "id": "64c024fd-fd46-43e9-9ff3-91f24d39c025",
        "data": {
          "type": "itsm-worknotes",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false,
          "event_type": "Change",
          "work_notes": "{{itsmWorknotesOutput}}"
        },
        "type": "itsm-worknotes",
        "dragging": false,
        "measured": {
          "width": 150,
          "height": 50
        },
        "position": {
          "x": 356.4444444444445,
          "y": 913.3485708236693
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "e6895ea4-0e76-4396-bcd2-b0756856705a",
        "data": {
          "type": "end",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "end",
        "dragging": false,
        "measured": {
          "width": 32,
          "height": 48
        },
        "position": {
          "x": 415.61111111111114,
          "y": 1039.9596819347803
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "a033b6dd-4b63-444c-82db-6328fb2137d9",
        "data": {
          "type": "decision",
          "error": false,
          "value": "",
          "script": "const finalConfigOutput = getVariable(\"finalConfigOutput\");\nconst tacacs_ip = getVariable(\"tacacs_ip\");\n\nlet devicesToConfigure = {};\nlet allDevices = {};\nlet reportAvailable = true;\nlet resultList = {};\nlet errorList = {};\nerrorList.errors = [];\n\nfor (const [deviceIP, jobOutput] of Object.entries(finalConfigOutput)) {\n  if (!jobOutput) {\n    reportAvailable = false;\n    errorList.errors = [\"No data available\"];\n    continue;\n  }\n  const showCommand = jobOutput.show_command;\n  const jobReportJsonData = jobOutput.job_report;\n\n  if (\n    !jobReportJsonData ||\n    !jobReportJsonData ||\n    !Array.isArray(jobReportJsonData)\n  ) {\n    reportAvailable = false;\n    errorList.errors = [\"No report available\"];\n  } else {\n    jobReportJsonData.forEach((dataItem) => {\n      if (!dataItem) {\n        reportAvailable = false;\n        return;\n      }\n\n      const deviceIp = dataItem.ip_address;\n      const reachabilityStatus = dataItem.device_status === \"Reachable\";\n      let changeRequired = true;\n      let currentConfig = \"\";\n      let authentication = false;\n\n      if (dataItem.device_status === \"Reachable\") {\n        authentication = true;\n      }\n\n      allDevices[deviceIp] = true;\n\n      if (\n        !dataItem.data_dump_post ||\n        !Array.isArray(dataItem.data_dump_post) ||\n        dataItem.data_dump_post.length < 1\n      ) {\n        changeRequired = null;\n        currentConfig = \"NA\";\n\n        resultList[deviceIp] = {\n          reachability_status: reachabilityStatus,\n          authentication: authentication,\n          change_required: changeRequired,\n          current_config: currentConfig,\n        };\n\n        reportAvailable = false;\n        errorList.errors = [`No data available for ${deviceIp}`];\n        return;\n      }\n\n      let dataFound = false;\n      let jobOutputNotAvailable = false;\n\n      dataItem.data_dump_post.forEach((command) => {\n        if (\n          command &&\n          command.json_output &&\n          Array.isArray(command.json_output) &&\n          command.command_name === `${showCommand}`\n        ) {\n          const array = command.json_output;\n\n          for (let i = 0; i < array.length; i++) {\n            if (array[i].includes(tacacs_ip)) {\n              dataFound = true;\n              changeRequired = false;\n              break;\n            } else {\n              changeRequired = true;\n            }\n          }\n\n          currentConfig = command.command_output;\n        } else {\n          changeRequired = null;\n          jobOutputNotAvailable = true;\n          currentConfig = \"No output available\";\n          errorList.errors.push(`No output available for ${deviceIp}`);\n        }\n      });\n      \n      if (!dataFound && !jobOutputNotAvailable) {\n        devicesToConfigure[deviceIp] = true;\n      }\n\n      resultList[deviceIp] = {\n        reachability_status: reachabilityStatus,\n        authentication: authentication,\n        change_required: changeRequired,\n        current_config: currentConfig,\n      };\n    });\n  }\n}\n\nfunction formatResultListPlainText(resultList) {\n  let text = \"Device Configuration Report\\n\\n\";\n\n  for (const [ip, data] of Object.entries(resultList)) {\n    text += `Device IP: ${ip}\n  Reachable: ${data.reachability_status ? \"Yes\" : \"No\"}\n  Authenticated: ${data.authentication ? \"Yes\" : \"No\"}\n  Change Required: ${data.change_required === null\n        ? \"Unknown\"\n        : data.change_required\n          ? \"Yes\"\n          : \"No\"\n      }\n  Current Config:\n${data.current_config}\n------------------------------------------------------------\n`;\n  }\n\n  return text;\n}\n\nconst plainTextOutput = formatResultListPlainText(resultList);\n\nsetVariable(\"plainTextOutput\", plainTextOutput);\n\nreturn (\n  Object.keys(devicesToConfigure).length !== Object.keys(allDevices).length\n);\n",
          "success": false,
          "isLoading": false
        },
        "type": "decision",
        "dragging": false,
        "measured": {
          "width": 48,
          "height": 48
        },
        "position": {
          "x": 216.22222222222223,
          "y": 681.9041263792247
        },
        "selected": false,
        "resizable": false
      },
      {
        "id": "start",
        "data": {
          "type": "start",
          "error": false,
          "value": "",
          "success": false,
          "isLoading": false
        },
        "type": "start",
        "dragging": false,
        "measured": {
          "width": 32,
          "height": 48
        },
        "position": {
          "x": 526.7725388146754,
          "y": -256.9251480589587
        },
        "selected": false,
        "resizable": false
      }
    ],
    "viewport": {
      "x": 335.59638090102635,
      "y": 137.46939464192724,
      "zoom": 0.5
    }
  },
  "config_flow": true,
  "workflow_type": "change",
  "metadata": {
    "tags": [
      "TACACS",
      "show run | in tacacs",
      "tacacs server",
      "TACACS configuration",
      "aaa authentication"
    ],
    "type": "change",
    "device": "EOS",
    "vendor": "Arista"
  }
}